@page "/columnwithdrilldown-chart"
@inject IChartService chartService
@inject IJSRuntime jsRuntime

<h3>Column With Drilldown Chart</h3>

<figure class="highcharts-figure">
    <div id="columnwithdrilldownchart"></div>
</figure>

<h4>Code Example</h4>
<pre class="prettyprint opacity-load">
@@code {
 private ChartObject ColumnWithDrilldown = new ChartObject()
        {
            Chart = new Chart(ChartType.Column, false),
            Title = new Title("Browser market shares. January, 2022"),
            Subtitle = new Title("Click the columns to view versions."),
            XAxis = new XAxis(AxisType.Category),
            YAxis = new YAxis()
            {
                Title = new Title("Total percent market share"),
            },
            Legend = new Legend(false),
            PlotOptions = new PlotOptions()
            {
                Column = new PlotOptionsColumn(5),
                Pie = new PlotOptionsPie()
                {
                    AllowPointSelect = true,
                    Cursor = CursorType.Pointer,
                    Depth = 35,
                    DataLabels = new Labels()
                    {
                        Enabled = true,
                        Format = "{point.name} : {point.y}%"
                    }
                },
                Series = new PlotOptionsSeries()
                {
                    PointWidth = 60,
                    DataLabels = new DataLabels()
                    {
                        Enabled = true,
                        Format = "{point.y:.1f}%"
                    }
                }
            },
            Tooltip = new Tooltip()
            {
                HeaderFormat = "&lt;span style='font - size:11px'>{series.name}&lt;/span>&lt;br>",
                PointFormat = "&lt;span style='color:{point.color}''>{point.name}&lt;/span>: &lt;b>{point.y:.2f}%&lt;/b> of total&lt;br/>"
            },
            Series = new List&lt;SeriesElement>(){
            new SeriesElement(){
                Name = "Browsers",
                ColorByPoint = true,
                Data = new List&lt;object>(){
                    {new Datum(){ Name = "Chrome", Y = 63.06, Drilldown = "Chrome" }},
                    {new Datum(){ Name = "Safari", Y = 19.84, Drilldown = "Safari" }},
                    {new Datum(){ Name = "Firefox", Y = 4.18, Drilldown = "Firefox" }},
                    {new Datum(){ Name = "Edge", Y = 4.12, Drilldown = "Edge" }},
                    {new Datum(){ Name = "Opera", Y = 2.33, Drilldown = "Opera" }},
                    {new Datum(){ Name = "Internet Explorer", Y = 0.45, Drilldown = "Internet Explorer" }},
                    {new Datum(){ Name = "Other", Y = 1.582, Drilldown = null }},
                }
            }
        },
            Drilldown = new Drilldown
            {
                Series = new List&lt;SeriesElement>
            {
                new SeriesElement
                {
                    Type = ChartType.Pie,
                    Name = "Chrome",
                    Id = "Chrome",                    
                    Data = new List&lt;object>
                    {
                        {new Datum(){ Name = "v65.0", Y = 0.1 }},
                        {new Datum(){ Name = "v64.0", Y = 1.3 }},
                        {new Datum(){ Name = "v63.0", Y = 53.02 }},
                        {new Datum(){ Name = "v62.0", Y = 1.4 }},
                        {new Datum(){ Name = "v61.0", Y = 0.88 }},
                        {new Datum(){ Name = "v60.0", Y= 0.56 }},
                        {new Datum(){ Name = "v59.0", Y = 0.45 }},
                        {new Datum(){ Name = "v58.0", Y = 0.49 }},
                        {new Datum(){ Name = "v57.0", Y = 0.32 }},
                        {new Datum(){ Name = "v56.0", Y = 0.29 }},
                        {new Datum(){ Name = "v55.0", Y = 0.79 }},
                        {new Datum(){ Name = "v54.0", Y = 0.18 }},
                        {new Datum(){ Name = "v51.0", Y = 0.13 }},
                        {new Datum(){ Name = "v49.0", Y = 2.16 }},
                        {new Datum(){ Name = "v48.0", Y = 0.13 }},
                        {new Datum(){ Name = "v47.0", Y = 0.11 }},
                        {new Datum(){ Name = "v43.0", Y = 0.17 }},
                        {new Datum(){ Name = "v29.0", Y = 0.26 }},
                    }
                },
                new SeriesElement
                {
                    Type = ChartType.Pie,
                    Name = "Firefox",
                    Id = "Firefox",
                    Data = new List&lt;object>
                    {
                        {new Datum(){ Name = "v58.0", Y = 1.02 }},
                        {new Datum(){ Name = "v57.0", Y = 7.36 }},
                        {new Datum(){ Name = "v56.0", Y = 0.35 }},
                        {new Datum(){ Name = "v55.0", Y = 0.11 }},
                        {new Datum(){ Name = "v54.0", Y = 0.1 }},
                        {new Datum(){ Name = "v52.0", Y = 0.95 }},
                        {new Datum(){ Name = "v51.0", Y = 0.15 }},
                        {new Datum(){ Name = "v50.0", Y = 0.1 }},
                        {new Datum(){ Name = "v48.0", Y = 0.31 }},
                        {new Datum(){ Name = "v47.0", Y = 0.12 }},
                    }
                },
                new SeriesElement
                {
                    Type = ChartType.Pie,
                    Name = "Internet Explorer",
                    Id = "Internet Explorer",
                    Data = new List&lt;object>
                    {
                        {new Datum(){ Name = "v11.0", Y = 6.2 }},
                        {new Datum(){ Name = "v10.0", Y = 0.29 }},
                        {new Datum(){ Name = "v9.0", Y = 0.27 }},
                        {new Datum(){ Name = "v8.0", Y = 0.47 }},
                    }
                },
                new SeriesElement
                {
                    Type = ChartType.Pie,
                    Name = "Safari",
                    Id = "Safari",
                    Data = new List&lt;object>
                    {
                        {new Datum(){ Name = "v11.0", Y = 3.39 }},
                        {new Datum(){ Name = "v10.1", Y = 0.96 }},
                        {new Datum(){ Name = "v10.0", Y = 0.36 }},
                        {new Datum(){ Name = "v9.1", Y = 0.54 }},
                        {new Datum(){ Name = "v9.0", Y = 0.13 }},
                        {new Datum(){ Name = "v5.1", Y = 0.2 }},
                    }
                },
                new SeriesElement
                {
                    Type = ChartType.Pie,
                    Name = "Edge",
                    Id = "Edge",
                    Data = new List&lt;object>
                    {
                        {new Datum(){ Name = "v16.0", Y = 2.6 }},
                        {new Datum(){ Name = "v15.0", Y = 0.92 }},
                        {new Datum(){ Name = "v14.0", Y = 0.4 }},
                        {new Datum(){ Name = "v13.0", Y = 0.1 }},
                    }
                },
                new SeriesElement
                {
                    Type = ChartType.Pie,
                    Name = "Opera",
                    Id = "Opera",
                    Data = new List&lt;object>
                    {
                        {new Datum(){ Name = "v50.0", Y = 0.96 }},
                        {new Datum(){ Name = "v49.0", Y = 0.82 }},
                        {new Datum(){ Name = "v12.1", Y = 0.14 }},
                    }
                }
            }
            }
        };

    protected override void OnAfterRender(bool firstRender)
    {
        base.OnAfterRender(firstRender);
        chartService.RenderChart("columnwithdrilldownchart", ColumnWithDrilldown.Generate());
        jsRuntime.InvokeVoidAsync("prettyPrint");
    }
}
</pre>

@code {
    private ChartObject ColumnWithDrilldown = new ChartObject()
        {
            Chart = new Chart(ChartType.Column, false),
            Title = new Title("Browser market shares. January, 2022"),
            Subtitle = new Title("Click the columns to view versions."),
            XAxis = new XAxis(AxisType.Category),
            YAxis = new YAxis()
            {
                Title = new Title("Total percent market share"),
            },
            Legend = new Legend(false),
            PlotOptions = new PlotOptions()
            {
                Column = new PlotOptionsColumn(5),
                Pie = new PlotOptionsPie()
                {
                    AllowPointSelect = true,
                    Cursor = CursorType.Pointer,
                    Depth = 35,
                    DataLabels = new Labels()
                    {
                        Enabled = true,
                        Format = "{point.name} : {point.y}%"
                    }
                },
                Series = new PlotOptionsSeries()
                {
                    PointWidth = 60,
                    DataLabels = new DataLabels()
                    {
                        Enabled = true,
                        Format = "{point.y:.1f}%"
                    }
                }
            },
            Tooltip = new Tooltip()
            {
                HeaderFormat = "<span style='font - size:11px'>{series.name}</span><br>",
                PointFormat = "<span style='color:{point.color}''>{point.name}</span>: <b>{point.y:.2f}%</b> of total<br/>"
            },
            Series = new List<SeriesElement>(){
            new SeriesElement(){
                Name = "Browsers",
                ColorByPoint = true,
                Data = new List<object>(){
                    {new Datum(){ Name = "Chrome", Y = 63.06, Drilldown = "Chrome" }},
                    {new Datum(){ Name = "Safari", Y = 19.84, Drilldown = "Safari" }},
                    {new Datum(){ Name = "Firefox", Y = 4.18, Drilldown = "Firefox" }},
                    {new Datum(){ Name = "Edge", Y = 4.12, Drilldown = "Edge" }},
                    {new Datum(){ Name = "Opera", Y = 2.33, Drilldown = "Opera" }},
                    {new Datum(){ Name = "Internet Explorer", Y = 0.45, Drilldown = "Internet Explorer" }},
                    {new Datum(){ Name = "Other", Y = 1.582, Drilldown = null }},
                }
            }
        },
            Drilldown = new Drilldown
            {
                Series = new List<SeriesElement>
            {
                new SeriesElement
                {
                    Type = ChartType.Pie,
                    Name = "Chrome",
                    Id = "Chrome",                    
                    Data = new List<object>
                    {
                        {new Datum(){ Name = "v65.0", Y = 0.1 }},
                        {new Datum(){ Name = "v64.0", Y = 1.3 }},
                        {new Datum(){ Name = "v63.0", Y = 53.02 }},
                        {new Datum(){ Name = "v62.0", Y = 1.4 }},
                        {new Datum(){ Name = "v61.0", Y = 0.88 }},
                        {new Datum(){ Name = "v60.0", Y= 0.56 }},
                        {new Datum(){ Name = "v59.0", Y = 0.45 }},
                        {new Datum(){ Name = "v58.0", Y = 0.49 }},
                        {new Datum(){ Name = "v57.0", Y = 0.32 }},
                        {new Datum(){ Name = "v56.0", Y = 0.29 }},
                        {new Datum(){ Name = "v55.0", Y = 0.79 }},
                        {new Datum(){ Name = "v54.0", Y = 0.18 }},
                        {new Datum(){ Name = "v51.0", Y = 0.13 }},
                        {new Datum(){ Name = "v49.0", Y = 2.16 }},
                        {new Datum(){ Name = "v48.0", Y = 0.13 }},
                        {new Datum(){ Name = "v47.0", Y = 0.11 }},
                        {new Datum(){ Name = "v43.0", Y = 0.17 }},
                        {new Datum(){ Name = "v29.0", Y = 0.26 }},
                    }
                },
                new SeriesElement
                {
                    Type = ChartType.Pie,
                    Name = "Firefox",
                    Id = "Firefox",
                    Data = new List<object>
                    {
                        {new Datum(){ Name = "v58.0", Y = 1.02 }},
                        {new Datum(){ Name = "v57.0", Y = 7.36 }},
                        {new Datum(){ Name = "v56.0", Y = 0.35 }},
                        {new Datum(){ Name = "v55.0", Y = 0.11 }},
                        {new Datum(){ Name = "v54.0", Y = 0.1 }},
                        {new Datum(){ Name = "v52.0", Y = 0.95 }},
                        {new Datum(){ Name = "v51.0", Y = 0.15 }},
                        {new Datum(){ Name = "v50.0", Y = 0.1 }},
                        {new Datum(){ Name = "v48.0", Y = 0.31 }},
                        {new Datum(){ Name = "v47.0", Y = 0.12 }},
                    }
                },
                new SeriesElement
                {
                    Type = ChartType.Pie,
                    Name = "Internet Explorer",
                    Id = "Internet Explorer",
                    Data = new List<object>
                    {
                        {new Datum(){ Name = "v11.0", Y = 6.2 }},
                        {new Datum(){ Name = "v10.0", Y = 0.29 }},
                        {new Datum(){ Name = "v9.0", Y = 0.27 }},
                        {new Datum(){ Name = "v8.0", Y = 0.47 }},
                    }
                },
                new SeriesElement
                {
                    Type = ChartType.Pie,
                    Name = "Safari",
                    Id = "Safari",
                    Data = new List<object>
                    {
                        {new Datum(){ Name = "v11.0", Y = 3.39 }},
                        {new Datum(){ Name = "v10.1", Y = 0.96 }},
                        {new Datum(){ Name = "v10.0", Y = 0.36 }},
                        {new Datum(){ Name = "v9.1", Y = 0.54 }},
                        {new Datum(){ Name = "v9.0", Y = 0.13 }},
                        {new Datum(){ Name = "v5.1", Y = 0.2 }},
                    }
                },
                new SeriesElement
                {
                    Type = ChartType.Pie,
                    Name = "Edge",
                    Id = "Edge",
                    Data = new List<object>
                    {
                        {new Datum(){ Name = "v16.0", Y = 2.6 }},
                        {new Datum(){ Name = "v15.0", Y = 0.92 }},
                        {new Datum(){ Name = "v14.0", Y = 0.4 }},
                        {new Datum(){ Name = "v13.0", Y = 0.1 }},
                    }
                },
                new SeriesElement
                {
                    Type = ChartType.Pie,
                    Name = "Opera",
                    Id = "Opera",
                    Data = new List<object>
                    {
                        {new Datum(){ Name = "v50.0", Y = 0.96 }},
                        {new Datum(){ Name = "v49.0", Y = 0.82 }},
                        {new Datum(){ Name = "v12.1", Y = 0.14 }},
                    }
                }
            }
            }
        };

    protected override void OnAfterRender(bool firstRender)
    {
        base.OnAfterRender(firstRender);
        chartService.RenderChart("columnwithdrilldownchart", ColumnWithDrilldown.Generate());
        jsRuntime.InvokeVoidAsync("prettyPrint");
    }
}
