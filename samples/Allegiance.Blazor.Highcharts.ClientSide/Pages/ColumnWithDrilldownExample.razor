@page "/columnwithdrilldown-chart"
@inject IChartService chartService
@inject IJSRuntime jsRuntime

<h3>Column With Drilldown Chart</h3>

<figure class="highcharts-figure">
    <div id="columnwithdrilldownchart"></div>
</figure>

<h4>Code Example</h4>
<pre class="prettyprint opacity-load">
@@code {
        private ChartObject ColumnWithDrilldown = new ChartObject() {
            Chart = new Chart(ChartType.Column, false),
            Title = new Title("Browser market shares. January, 2022"),
            Subtitle = new Title("Click the columns to view versions."),
            XAxis = new XAxis(AxisType.Category),
            YAxis = new YAxis() {
                Title = new Title("Total percent market share"),
            },
            Legend = new Legend(false), 
            PlotOptions = new PlotOptions() {
                Column = new PlotOptionsColumn(5),
                Series = new PlotOptionsSeries() {
                    PointWidth = 60,
                    DataLabels = new DataLabels() {
                        Enabled = true,
                        Format = '{point.y:.1f}%'
                    }
                }
            },
            Series = new List&lt;SeriesElement>(){
            new SeriesElement(){
                Name = "Browsers",
                //Type = ChartType.ColumnWithDrilldown,
                ColorByPoint = true,
                Data = new List&lt;object>(){
                    {new Datum("Chrome", 63.06) },
                    {new Datum("Safari", 19.84) },
                    {new Datum("Firefox", 4.18) },
                    {new Datum("Edge", 4.12) },
                    {new Datum("Opera", 2.33) },
                    {new Datum("Internet Explorer", 0.45) },
                    {new Datum("Other", 1.582) },
                }
            }
        }
        };

        protected override void OnAfterRender(bool firstRender)
        {
            base.OnAfterRender(firstRender);
            chartService.RenderChart("columnwithdrilldown", ColumnWithDrilldown.Generate());
            jsRuntime.InvokeVoidAsync("prettyPrint");
        }
}
</pre>

@code {
    private ChartObject ColumnWithDrilldown = new ChartObject() {
        Chart = new Chart(ChartType.Column, false),
        Title = new Title("Browser market shares. January, 2022"),
        Subtitle = new Title("Click the columns to view versions."),
        XAxis = new XAxis(AxisType.Category),
        YAxis = new YAxis() {
            Title = new Title("Total percent market share"),
        },
        Legend = new Legend(false),
        PlotOptions = new PlotOptions(){
            Column = new PlotOptionsColumn(5),
            Series = new PlotOptionsSeries(){
                PointWidth = 60,
                DataLabels = new DataLabels(){
                    Enabled = true,
                        Format = "{point.y:.1f}%"
                }  
            }
        },
        Series = new List<SeriesElement>(){
            new SeriesElement(){
                Name = "Browsers",
                //Type = ChartType.ColumnWithDrilldown,
                ColorByPoint = true,
                Data = new List<object>(){
                    {new Datum("Chrome", 63.06) },
                    {new Datum("Safari", 19.84) },
                    {new Datum("Firefox", 4.18) },
                    {new Datum("Edge", 4.12) },
                    {new Datum("Opera", 2.33) },
                    {new Datum("Internet Explorer", 0.45) },
                    {new Datum("Other", 1.582) },
                }
            }
        },
        Drilldown = new Drilldown
        {
            Series = new List<SeriesElement>
            {
                new SeriesElement
                {
                    Name = "Chrome",
                    Id = "Chrome",
                    Data = new List<object>
                    {
                        {new Datum("v65.0", 0.1) },
                        {new Datum("v64.0", 1.3) },
                        {new Datum("v63.0", 53.02) },
                        {new Datum("v62.0", 1.4) },
                        {new Datum("v61.0", 0.88) },
                        {new Datum("v60.0", 0.56) },
                        {new Datum("v59.0", 0.45) },
                        {new Datum("v58.0", 0.49) },
                        {new Datum("v57.0", 0.32) },
                        {new Datum("v56.0", 0.29) },
                        {new Datum("v55.0", 0.79) },
                        {new Datum("v54.0", 0.18) },
                        {new Datum("v51.0", 0.13) },
                        {new Datum("v49.0", 2.16) },
                        {new Datum("v48.0", 0.13) },
                        {new Datum("v47.0", 0.11) },
                        {new Datum("v43.0", 0.17) },
                        {new Datum("v29.0", 0.26) },
                    }
                },
                new SeriesElement
                {
                    Name = "Firefox",
                    Id = "Firefox",
                    Data = new List<object>
                    {
                        {new Datum("v58.0", 1.02) },
                        {new Datum("v57.0", 7.36) },
                        {new Datum("v56.0", 0.35) },
                        {new Datum("v55.0", 0.11) },
                        {new Datum("v54.0", 0.1) },
                        {new Datum("v52.0", 0.95) },
                        {new Datum("v51.0", 0.15) },
                        {new Datum("v50.0", 0.1) },
                        {new Datum("v48.0", 0.31) },
                        {new Datum("v47.0", 0.12) },
                    }
                },
                new SeriesElement
                {
                    Name = "Internet explorer",
                    Id = "Internet explorer",
                    Data = new List<object>
                    {
                        {new Datum("v11.0", 6.2) },
                        {new Datum("v10.0", 0.29) },
                        {new Datum("v9.0", 0.27) },
                        {new Datum("v8.0", 0.47) },
                    }
                },
                new SeriesElement
                {
                    Name = "Safari",
                    Id = "Safari",
                    Data = new List<object>
                    {
                        {new Datum("v11.0", 3.39) },
                        {new Datum("v10.1", 0.96) },
                        {new Datum("v10.0", 0.36) },
                        {new Datum("v9.1", 0.54) },
                        {new Datum("v9.0", 0.13) },
                        {new Datum("v5.1", 0.2) },
                    }
                },
                new SeriesElement
                {
                    Name = "Edge",
                    Id = "Edge",
                    Data = new List<object>
                    {
                        {new Datum("v16.0", 2.6) },
                        {new Datum("v15.0", 0.92) },
                        {new Datum("v14.0", 0.4) },
                        {new Datum("v13.0", 0.1) },
                    }
                },
                new SeriesElement
                {
                    Name = "Opera",
                    Id = "Opera",
                    Data = new List<object>
                    {
                        {new Datum("v50.0", 0.96) },
                        {new Datum("v49.0", 0.82) },
                        {new Datum("v12.1", 0.14) },
                    }
                }
            }
        }
    };

    protected override void OnAfterRender(bool firstRender)
    {
        base.OnAfterRender(firstRender);
        chartService.RenderChart("columnwithdrilldownchart", ColumnWithDrilldown.Generate());
        jsRuntime.InvokeVoidAsync("prettyPrint");
    }
}
